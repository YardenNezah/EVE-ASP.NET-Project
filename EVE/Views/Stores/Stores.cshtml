@model IEnumerable<EVE.Controllers.Stores>
@using Newtonsoft.Json

@{ ViewData["Title"] = "Stores"; }
<style type="text/css">
    /* map needs width and height to appear */
    #map {
        width: 900px;
        max-width: 100%;
        height: 500px;
    }
</style>
<div id="map"></div>
<div id="info_div"></div>
<script>
function initMap() {
    var myMapCenter = { lat: 32.085300, lng: 34.781769 };

        // Create a map object and specify the DOM element for display.
        var map = new google.maps.Map(document.getElementById('map'), {
            center: myMapCenter,
            zoom: 14
        });


        function markStore(storeInfo) {

            // Create a marker and set its position.
            var marker = new google.maps.Marker({
                map: map,
                position: storeInfo,
                title: "EvE store"
            });
            // show store info when marker is clicked
            marker.addListener('click', function () {
                showStoreInfo("EvE store");
            });


    }

    // show store info in text box
    function showStoreInfo(storeInfo) {
        var info_div = document.getElementById('info_div');
        info_div.innerHTML = 'Store name: '
            + storeInfo;
    }

    var stores=@Html.Raw(JsonConvert.SerializeObject(ViewBag.storesLocation));

    stores.forEach(function (store) {
        window.alert(store.lat + " " + store.lng);
        markStore(new google.maps.LatLng(store.lat, store.lng));
    });
    }</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVuiJ4kCTsVZkbihbJOhBO2Cm0qFAssJw&callback=initMap" async defer"></script>